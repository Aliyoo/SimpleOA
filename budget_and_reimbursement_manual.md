# SimpleOA 预算与报销操作手册

## 引言

欢迎使用 SimpleOA 系统的预算与报销模块。本手册旨在帮助您了解并熟练使用相关功能，实现高效、规范的费用管理。

---

## 目录
1.  [预算管理](#预算管理)
    *   [1.1. 概述](#11-预算管理概述)
    *   [1.2. 主要功能](#12-预算管理主要功能)
        *   [1.2.1. 查看预算列表](#121-查看预算列表)
        *   [1.2.2. 搜索与筛选预算](#122-搜索与筛选预算)
        *   [1.2.3. 创建新预算](#123-创建新预算)
        *   [1.2.4. 编辑与删除预算](#124-编辑与删除预算)
        *   [1.2.5. 预算统计与分析](#125-预算统计与分析)
        *   [1.2.6. 预算预警](#126-预算预警)
2.  [报销管理](#报销管理)
    *   [2.1. 概述](#21-报销管理概述)
    *   [2.2. 主要功能](#22-报销管理主要功能)
        *   [2.2.1. 创建新的报销申请](#221-创建新的报销申请)
        *   [2.2.2. 查看和管理报销列表](#222-查看和管理报销列表)
        *   [2.2.3. 报销统计](#223-报销统计)
    *   [2.3. 报销审批操作（基于实际实现）](#23-报销审批操作)

---

## 1. 预算管理

<a name="11-预算管理概述"></a>
### 1.1. 概述

预算管理模块旨在帮助项目经理、财务人员和管理员对项目预算进行有效的规划、控制和跟踪。通过此模块，您可以为项目创建预算，监控预算使用情况，并在预算超支前获得预警。

<a name="12-预算管理主要功能"></a>
### 1.2. 主要功能

<a name="121-查看预算列表"></a>
#### 1.2.1. 查看预算列表

所有与您相关的预算都会显示在“预算列表”中。

-   **管理员 (Admin) 和财务人员 (Finance):** 可以查看系统内所有项目的预算。
-   **项目经理 (Manager):** 可以查看由您负责的项目的预算。

列表中会展示预算的名称、所属项目、预算类型、起止日期、总金额、已用金额、剩余金额、使用率（进度条显示）和当前状态。

<a name="122-搜索与筛选预算"></a>
#### 1.2.2. 搜索与筛选预算

为了快速找到特定预算，您可以使用列表上方的“展开搜索”功能（再次点击可“收起搜索”）：
-   **关键词:** 按预算名称进行模糊搜索。
-   **所属项目:** 从下拉列表中选择一个项目来筛选。
-   **预算类型:** 按预算类型（如“差旅费/办公费/通信费”等）筛选。
-   **状态:** 按“活跃（ACTIVE）”、“待定（PENDING）”或“关闭（CLOSED）”筛选。
-   **开始日期范围:** 选择开始日期的区间。
-   **结束日期范围:** 选择结束日期的区间。
-   **总预算（金额范围）:** 分别填写“最小金额/最大金额”。
-   **已使用（金额范围）:** 分别填写“最小金额/最大金额”。

填写好筛选条件后，点击“搜索”按钮即可。点击“重置”可清除所有筛选条件。

<a name="123-创建新预算"></a>
#### 1.2.3. 创建新预算

只有 **管理员**、**财务人员** 和 **项目经理** 有权限创建新预算。项目经理只能为自己管理的项目创建预算；当您没有可管理的项目时，“新建预算”按钮会不可用，并显示提示“您没有可管理的项目，无法创建预算”。

在“预算列表”标签页中，点击“新建预算”，系统会弹出“批量新建预算”对话框：

1.  **基础信息**（新建时可编辑，编辑模式下不可更改）：
    *   **所属项目:** 选择要创建预算的项目（必填）。
    *   **开始日期 / 结束日期:** 设置预算生效区间（必填）。
2.  **预算明细**（可添加多行，批量创建多条预算）：
    *   每一行包含：
        -   **预算类型:** 从预置列表选择（如“劳务费/差旅费/办公费/通信费/…”，必填）。
        -   **总预算:** 为该类型设置预算金额（必填，>= 0）。
        -   **描述:** 可选备注。
    *   通过“+ 添加预算项”增加新行；可删除未需要的行。
3.  点击“确定”保存。系统将为选定项目与时间区间，按各行“预算类型”批量生成预算项。

说明：当前新建对话框不包含“预算名称”和“状态”字段；状态默认由系统控制，预算类型用于区分各类科目预算。

<a name="124-编辑与删除预算"></a>
#### 1.2.4. 编辑与删除预算

-   **编辑:** 在预算列表点击“编辑”进入“编辑预算”对话框。编辑模式下：
-   不可修改“所属项目”、“开始/结束日期”和“预算类型”。
-   不可新增/删除预算项，仅可调整现有预算项的“总预算”和“描述”。
-   修改后点击“确定”保存。

**删除:** 点击“删除”按钮。系统会弹出确认对话框，确认后即可删除。请注意，此操作不可恢复。

<a name="125-预算统计与分析"></a>
#### 1.2.5. 预算统计与分析

切换到“预算统计”标签页，您可以查看预算的整体情况。
-   **数据卡片:** 直观展示所有（您有权查看的）预算的“总预算金额”、“已使用金额”、“剩余金额”和“总使用率”。
-   **图表分析:** (功能待实现) 后续将提供预算分布饼图和使用趋势折线图，帮助您更直观地分析预算数据。

<a name="126-预算预警"></a>
#### 1.2.6. 预算预警

切换到“预算预警”标签页，这里会列出所有触发了预警规则的预算项。
-   **预警列表字段:** 预算名称、预算项目（预算项）、预警类型（百分比/金额阈值）、预警阈值、预警消息、预警日期、状态（未解决/已解决）、解决人、解决日期、解决方案。
-   **解决预警:** 对于“未解决”的预警，可点击操作列的“解决”按钮，填写“解决方案”后提交；提交后状态更新为“已解决”。

---

## 2. 报销管理

<a name="21-报销管理概述"></a>
### 2.1. 概述

报销管理模块为您提供了一个完整的线上报销流程，从提交申请、关联预算到审批跟踪。该模块与预算管理紧密集成，确保所有报销都在预算控制范围内进行。

<a name="22-报销管理主要功能"></a>
### 2.2. 主要功能

<a name="221-创建新的报销申请"></a>
#### 2.2.1. 创建新的报销申请

在“报销申请”标签页中，您可以发起一笔新的报销。

1.  **填写基本信息:**
    *   **报销标题:** 为您的报销申请起一个清晰的标题（例如，“XX项目7月份差旅费报销”）。
    *   **关联项目:** (可选) 如果这笔报销与特定项目相关，请从下拉列表中选择。选择项目后，系统会自动加载该项目的可用预算。

2.  **添加费用明细:**
    您可以点击“添加明细”按钮，为一笔报销申请添加多条费用记录。每一条明细都需要填写：
    *   **费用日期:** 该笔费用实际发生的日期。
    *   **费用类别:** 从下拉列表中选择费用的性质（如差旅费、交通费、办公费等）。
    *   **费用说明:** 详细描述这笔费用的用途。
    *   **预算来源:** (关键步骤) 如果您关联了项目，这里会显示该项目下的可用预算。请选择一个预算。**选择预算后，系统会自动加载该预算下的具体预算明细。**
    *   **预算明细:** (可选) 如果预算来源有更细的划分，您可以在此选择。
    *   **金额:** 填写该条明细的具体金额。系统会实时检查是否超出所选预算的余额，并给出提示。

3.  **上传凭证:**
    点击“凭证上传”区域的 `+` 图标，上传与报销相关的发票、收据等图片文件。您可以上传多张凭证。

4.  **提交操作:**
    *   **保存草稿:** 如果您还没准备好提交，可以点击“保存草稿”。申请将以“草稿”状态保存在“报销列表”中，您可以稍后回来继续编辑。
    *   **提交审批:** 当您确认所有信息无误后，点击“提交审批”。系统会进行最后一次预算检查，如果预算充足，申请将进入审批流程。提交后，您将无法再修改此申请。
    *   **重置表单:** 清空当前填写的所有信息。

<a name="222-查看和管理报销列表"></a>
#### 2.2.2. 查看和管理报销列表

切换到“报销列表”标签页，您可以查看您本人所有的报销申请记录。

-   **筛选和查询:** 您可以按“状态”（如草稿、审批中、已通过）、“申请日期范围”和“标题关键词”来快速查找报销记录。
-   **操作:**
    -   **查看详情:** 点击可查看报销申请的所有详细信息，包括费用明细和审批历史。
    -   **编辑:** **仅对“草稿”状态的申请可用。** 点击后，会将该申请的数据加载到“报销申请”页面供您修改。
    -   **删除:** **仅对“草稿”状态的申请可用。**
    -   **提交审批:** **仅对“草稿”状态的申请可用。** 点击可直接将该草稿提交至审批流程。
    -   **查看审批:** 对于已提交的申请，点击此按钮将跳转到“审批管理”模块，让您跟踪当前的审批节点和状态。

<a name="223-报销统计"></a>
#### 2.2.3. 报销统计

切换到“统计报表”标签页，您可以分析自己的报销数据。
-   **选择月份范围:** 设置一个时间段，点击“查询”。
-   **数据汇总:** 系统会展示该时间段内您的“报销总额”、“报销次数”、“通过率”等关键指标。
-   **图表分析:** 一个饼图会直观地展示您各项费用类别的分布情况。

---

<a name="23-报销审批操作"></a>
### 2.3. 报销审批操作（基于实际实现）

本小节面向使用者，描述“报销审批”在系统中的实际操作流程与注意事项（与系统实现一致）。

-  **状态说明:**
   -  DRAFT（草稿）：仅申请人可编辑/删除。
   -  PENDING_MANAGER_APPROVAL（待项目经理审批）。
   -  PENDING_FINANCE_APPROVAL（待财务审批）。
   -  APPROVED（已通过）。
   -  REJECTED（已驳回）。

-  **发起人：提交审批**
   -  进入“报销申请”页面，完善标题、费用明细、附件等信息。
   -  仅当状态为“草稿”时，显示“提交审批”。
   -  提交前系统会进行预算可用性校验：任一明细对应预算不足则无法提交，请调整预算来源或金额。
   -  提交成功后，报销流转到“待项目经理审批”。

-  **项目经理：审批操作**
   -  在“审批管理/我的审批”查看待办。
   -  打开详情可查看：基本信息、费用明细、预算占用、凭证附件、历史记录。
   -  操作：批准/驳回。批准后流转至“待财务审批”；驳回则流程结束，申请状态为“已驳回”。

-  **财务：审批与入账**
   -  在“审批管理/我的审批”查看待办。
   -  审核票据合规与预算归集信息。
   -  批准后系统将自动完成预算扣减与入账，报销状态变更为“已通过”。
   -  拒绝则流程结束，申请状态为“已驳回”，不发生预算扣减。

-  **我的审批（查询）**
   -  在“审批管理/我的审批”按类型（选择“报销”）、状态、时间范围等筛选。
   -  可分页查看，进入详情处理待办。

-  **批量处理（如已启用）**
   -  在“我的审批”列表可勾选多条进行“批量批准/批量拒绝”。
   -  建议仅对信息完整、风险较低的待办使用批量操作。

-  **通知与提醒**
   -  提交成功、到达新审批人、批准/拒绝时会发送系统通知。
   -  若长期未处理，审批人会收到提醒（具体频率以系统配置为准）。

-  **常见问题**
   -  提交时报“预算不足”：请核对费用明细的预算来源；必要时联系项目经理调整预算或拆分报销。
   -  “提交审批”按钮不可用：仅草稿状态可提交；请确认当前状态是否为 DRAFT。
